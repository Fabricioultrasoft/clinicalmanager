/*
Script gerado por Aqua Data Studio 8.0.4 em Fev-03-2010 08:13:48 PM
Banco de Dados: realinstitutodopulma
Esquema: clinicalmanager
Objetos: SEQUENCE, RULE, TABLE, VIEW, PROCEDURE, FUNCTION, INDEX, TRIGGER
*/
ALTER TABLE "clinicalmanager"."medico_internacao"
	DROP CONSTRAINT "medico_internacao_idmec_fkey" CASCADE ;
ALTER TABLE "clinicalmanager"."local_internacao"
	DROP CONSTRAINT "local_internacao_idloc_fkey" CASCADE ;
ALTER TABLE "clinicalmanager"."local_internacao"
	DROP CONSTRAINT "local_internacao_idint_fkey" CASCADE ;
ALTER TABLE "clinicalmanager"."item_de_fatura"
	DROP CONSTRAINT "item_de_fatura_idint_fkey" CASCADE ;
ALTER TABLE "clinicalmanager"."item_de_fatura"
	DROP CONSTRAINT "item_de_fatura_idfat_fkey" CASCADE ;
ALTER TABLE "clinicalmanager"."internacao"
	DROP CONSTRAINT "internacao_idpac_fkey" CASCADE ;
ALTER TABLE "clinicalmanager"."internacao"
	DROP CONSTRAINT "internacao_idcon_fkey" CASCADE ;
ALTER TABLE "clinicalmanager"."internacao"
	DROP CONSTRAINT "idmed_fk" CASCADE ;
ALTER TABLE "clinicalmanager"."internacao"
	DROP CONSTRAINT "faturada_check" CASCADE ;
ALTER TABLE "clinicalmanager"."internacao"
	DROP CONSTRAINT "data_entrada" CASCADE ;
ALTER TABLE "clinicalmanager"."fatura"
	DROP CONSTRAINT "tipo_fatura" CASCADE ;
ALTER TABLE "clinicalmanager"."paciente"
	DROP CONSTRAINT "cpf_unique" CASCADE ;
ALTER TABLE "clinicalmanager"."paciente"
	DROP CONSTRAINT "Codprontuario_unique" CASCADE ;
DROP INDEX "clinicalmanager"."paciente_pkey";
DROP INDEX "clinicalmanager"."medico_pkey";
DROP INDEX "clinicalmanager"."medico_internacao_pkey";
DROP INDEX "clinicalmanager"."local_pkey";
DROP INDEX "clinicalmanager"."local_internacao_pk";
DROP INDEX "clinicalmanager"."item_de_fatura_pkey";
DROP INDEX "clinicalmanager"."internacao_pkey";
DROP INDEX "clinicalmanager"."fatura_pk";
DROP INDEX "clinicalmanager"."cpf_unique";
DROP INDEX "clinicalmanager"."convenio_pkey";
DROP INDEX "clinicalmanager"."Codprontuario_unique";
DROP TABLE "clinicalmanager"."paciente";
DROP TABLE "clinicalmanager"."medico";
DROP TABLE "clinicalmanager"."medico_internacao";
DROP TABLE "clinicalmanager"."local";
DROP TABLE "clinicalmanager"."local_internacao";
DROP TABLE "clinicalmanager"."item_de_fatura";
DROP TABLE "clinicalmanager"."internacao";
DROP TABLE "clinicalmanager"."fatura";
DROP TABLE "clinicalmanager"."convenio";
DROP SEQUENCE "clinicalmanager"."fatura_idfat_seq";
DROP SEQUENCE "clinicalmanager"."paciente_idpac_seq";
DROP SEQUENCE "clinicalmanager"."medico_internacao_idmec_seq";
DROP SEQUENCE "clinicalmanager"."medico_internacao_idint_seq";
DROP SEQUENCE "clinicalmanager"."medico_idmed_seq";
DROP SEQUENCE "clinicalmanager"."local_idloc_seq";
DROP SEQUENCE "clinicalmanager"."internacao_idint_seq";
DROP SEQUENCE "clinicalmanager"."convenio_idcon_seq";

CREATE SEQUENCE "clinicalmanager"."convenio_idcon_seq";
CREATE SEQUENCE "clinicalmanager"."internacao_idint_seq";
CREATE SEQUENCE "clinicalmanager"."local_idloc_seq";
CREATE SEQUENCE "clinicalmanager"."medico_idmed_seq";
CREATE SEQUENCE "clinicalmanager"."medico_internacao_idint_seq";
CREATE SEQUENCE "clinicalmanager"."medico_internacao_idmec_seq";
CREATE SEQUENCE "clinicalmanager"."paciente_idpac_seq";
CREATE SEQUENCE "clinicalmanager"."fatura_idfat_seq";
CREATE TABLE "clinicalmanager"."convenio"  ( 
	"idcon"    	int4 NOT NULL DEFAULT nextval('convenio_idcon_seq'::regclass),
	"descricao"	varchar(50) NULL,
	PRIMARY KEY("idcon")
);
CREATE TABLE "clinicalmanager"."fatura"  ( 
	"codigo"         	varchar NULL,
	"data_fechamento"	date NULL,
	"data_inicio"    	date NULL,
	"data_fim"       	date NULL,
	"tipo"           	char(1) NULL,
	"mes_ref"        	int4 NULL,
	"paga"           	bool NULL,
	"fechada"        	bool NULL,
	"idfat"          	int4 NOT NULL DEFAULT nextval('clinicalmanager.fatura_idfat_seq'::regclass),
	PRIMARY KEY("idfat")
);
CREATE TABLE "clinicalmanager"."internacao"  ( 
	"idint"         	int4 NOT NULL DEFAULT nextval('internacao_idint_seq'::regclass),
	"idpac"         	int4 NULL,
	"idcon"         	int4 NULL,
	"data_in"       	timestamp NULL,
	"data_out"      	timestamp NULL,
	"obs"           	varchar(255) NULL,
	"vl_esperado_hn"	float8 NULL,
	"idmed"         	int4 NULL,
	"faturada"      	char(1) NULL,
	PRIMARY KEY("idint")
);
CREATE TABLE "clinicalmanager"."item_de_fatura"  ( 
	"idfat"	int4 NOT NULL,
	"idint"	int4 NOT NULL,
	"valor"	float8 NULL,
	PRIMARY KEY("idfat","idint")
);
CREATE TABLE "clinicalmanager"."local_internacao"  ( 
	"idint"       	int4 NOT NULL,
	"idloc"       	int4 NOT NULL,
	"data_in_loc" 	timestamp NOT NULL,
	"data_out_loc"	timestamp NULL,
	"obs_loc"     	varchar(255) NULL,
	PRIMARY KEY("data_in_loc","idint","idloc")
);
CREATE TABLE "clinicalmanager"."local"  ( 
	"idloc"   	int4 NOT NULL DEFAULT nextval('local_idloc_seq'::regclass),
	"nome"    	varchar(255) NULL,
	"gera_prd"	bool NULL,
	"andar"   	int4 NULL,
	PRIMARY KEY("idloc")
);
CREATE TABLE "clinicalmanager"."medico_internacao"  ( 
	"idint"      	int4 NOT NULL DEFAULT nextval('medico_internacao_idint_seq'::regclass),
	"idmec"      	int4 NOT NULL DEFAULT nextval('medico_internacao_idmec_seq'::regclass),
	"responsavel"	bool NULL,
	PRIMARY KEY("idint","idmec")
);
CREATE TABLE "clinicalmanager"."medico"  ( 
	"idmed"	int4 NOT NULL DEFAULT nextval('medico_idmed_seq'::regclass),
	"nome" 	varchar(50) NULL,
	PRIMARY KEY("idmed")
);
CREATE TABLE "clinicalmanager"."paciente"  ( 
	"idpac"        	int4 NOT NULL DEFAULT nextval('paciente_idpac_seq'::regclass),
	"nome"         	varchar(100) NULL,
	"cpf"          	varchar(11) NULL,
	"codprontuario"	int4 NULL,
	PRIMARY KEY("idpac")
);
CREATE UNIQUE INDEX "Codprontuario_unique"
	ON "clinicalmanager"."paciente"("codprontuario");
CREATE UNIQUE INDEX "convenio_pkey"
	ON "clinicalmanager"."convenio"("idcon");
CREATE UNIQUE INDEX "cpf_unique"
	ON "clinicalmanager"."paciente"("cpf");
CREATE UNIQUE INDEX "fatura_pk"
	ON "clinicalmanager"."fatura"("idfat");
CREATE UNIQUE INDEX "internacao_pkey"
	ON "clinicalmanager"."internacao"("idint");
CREATE UNIQUE INDEX "item_de_fatura_pkey"
	ON "clinicalmanager"."item_de_fatura"("idfat", "idint");
CREATE UNIQUE INDEX "local_internacao_pk"
	ON "clinicalmanager"."local_internacao"("idint", "idloc", "data_in_loc");
CREATE UNIQUE INDEX "local_pkey"
	ON "clinicalmanager"."local"("idloc");
CREATE UNIQUE INDEX "medico_internacao_pkey"
	ON "clinicalmanager"."medico_internacao"("idint", "idmec");
CREATE UNIQUE INDEX "medico_pkey"
	ON "clinicalmanager"."medico"("idmed");
CREATE UNIQUE INDEX "paciente_pkey"
	ON "clinicalmanager"."paciente"("idpac");

INSERT INTO "clinicalmanager"."convenio"("idcon", "descricao")
  VALUES(1, 'Unimed Recife');
INSERT INTO "clinicalmanager"."convenio"("idcon", "descricao")
  VALUES(2, 'GEAP');
INSERT INTO "clinicalmanager"."fatura"("codigo", "data_fechamento", "data_inicio", "data_fim", "tipo", "mes_ref", "paga", "fechada", "idfat")
  VALUES('108.12', '2009-12-30', '2009-12-01', '2009-12-31', 'H', 12, NULL, NULL, 5);
INSERT INTO "clinicalmanager"."fatura"("codigo", "data_fechamento", "data_inicio", "data_fim", "tipo", "mes_ref", "paga", "fechada", "idfat")
  VALUES('REPASS.067', '2008-11-30', '2008-11-01', '2009-11-30', 'P', 11, NULL, NULL, 6);
INSERT INTO "clinicalmanager"."internacao"("idint", "idpac", "idcon", "data_in", "data_out", "obs", "vl_esperado_hn", "idmed", "faturada")
  VALUES(43, 63, 1, '2009-12-08 00:00:00.0', '2009-12-12 00:00:00.0', 'asdfafsa fsdf saf', 125.44, 19, NULL);
INSERT INTO "clinicalmanager"."internacao"("idint", "idpac", "idcon", "data_in", "data_out", "obs", "vl_esperado_hn", "idmed", "faturada")
  VALUES(42, 59, 1, '2009-11-05 00:00:00.0', '2009-12-11 00:00:00.0', '', 366.0, 18, NULL);
INSERT INTO "clinicalmanager"."internacao"("idint", "idpac", "idcon", "data_in", "data_out", "obs", "vl_esperado_hn", "idmed", "faturada")
  VALUES(44, 10, 2, '2009-12-11 00:00:00.0', '2009-12-12 00:00:00.0', 'Testeee', 15.0, 18, NULL);
INSERT INTO "clinicalmanager"."internacao"("idint", "idpac", "idcon", "data_in", "data_out", "obs", "vl_esperado_hn", "idmed", "faturada")
  VALUES(40, 10, 1, '2009-11-04 00:00:00.0', '2009-12-10 00:00:00.0', '', 360.0, 1, NULL);
INSERT INTO "clinicalmanager"."internacao"("idint", "idpac", "idcon", "data_in", "data_out", "obs", "vl_esperado_hn", "idmed", "faturada")
  VALUES(46, 64, 1, '2009-12-26 00:00:00.0', NULL, 'Teste', NULL, 1, NULL);
INSERT INTO "clinicalmanager"."internacao"("idint", "idpac", "idcon", "data_in", "data_out", "obs", "vl_esperado_hn", "idmed", "faturada")
  VALUES(45, 62, 1, '2009-12-11 00:00:00.0', '2009-12-14 00:00:00.0', 'asdfsafdsaf', 30.0, 1, NULL);
INSERT INTO "clinicalmanager"."local_internacao"("idint", "idloc", "data_in_loc", "data_out_loc", "obs_loc")
  VALUES(40, 9, '2009-11-04 00:00:00.0', '2009-11-10 00:00:00.0', 'asdf');
INSERT INTO "clinicalmanager"."local_internacao"("idint", "idloc", "data_in_loc", "data_out_loc", "obs_loc")
  VALUES(40, 8, '2009-11-10 00:00:00.0', '2009-12-10 00:00:00.0', '');
INSERT INTO "clinicalmanager"."local_internacao"("idint", "idloc", "data_in_loc", "data_out_loc", "obs_loc")
  VALUES(42, 8, '292269055-12-02 20:00:00.0', '2009-12-11 00:00:00.0', '');
INSERT INTO "clinicalmanager"."local_internacao"("idint", "idloc", "data_in_loc", "data_out_loc", "obs_loc")
  VALUES(43, 8, '2009-12-09 00:00:00.0', '2009-12-12 00:00:00.0', 'asdf sadf asdf saf gasf d bddv ad');
INSERT INTO "clinicalmanager"."local_internacao"("idint", "idloc", "data_in_loc", "data_out_loc", "obs_loc")
  VALUES(44, 9, '2009-12-11 00:00:00.0', '2009-12-12 00:00:00.0', 'testeee');
INSERT INTO "clinicalmanager"."local_internacao"("idint", "idloc", "data_in_loc", "data_out_loc", "obs_loc")
  VALUES(45, 8, '2009-12-11 00:00:00.0', '2009-12-12 00:00:00.0', 'fxghvj');
INSERT INTO "clinicalmanager"."local_internacao"("idint", "idloc", "data_in_loc", "data_out_loc", "obs_loc")
  VALUES(45, 13, '2009-12-12 00:00:00.0', '2009-12-14 00:00:00.0', 'zxgfg');
INSERT INTO "clinicalmanager"."local_internacao"("idint", "idloc", "data_in_loc", "data_out_loc", "obs_loc")
  VALUES(45, 13, '2009-12-14 00:00:00.0', '2009-12-14 00:00:00.0', '');
INSERT INTO "clinicalmanager"."local"("idloc", "nome", "gera_prd", "andar")
  VALUES(8, 'Apt. 503', true, 5);
INSERT INTO "clinicalmanager"."local"("idloc", "nome", "gera_prd", "andar")
  VALUES(9, 'Apt. 501', true, 5);
INSERT INTO "clinicalmanager"."local"("idloc", "nome", "gera_prd", "andar")
  VALUES(16, '', true, 5);
INSERT INTO "clinicalmanager"."local"("idloc", "nome", "gera_prd", "andar")
  VALUES(12, 'Apt. 505', true, 5);
INSERT INTO "clinicalmanager"."local"("idloc", "nome", "gera_prd", "andar")
  VALUES(13, 'Apt. 205', false, 2);
INSERT INTO "clinicalmanager"."medico"("idmed", "nome")
  VALUES(1, 'Roberto Campelo');
INSERT INTO "clinicalmanager"."medico"("idmed", "nome")
  VALUES(18, 'Antonio Roberto Leite Campelo');
INSERT INTO "clinicalmanager"."medico"("idmed", "nome")
  VALUES(21, 'Maria Paula Gonçalves de Athayde');
INSERT INTO "clinicalmanager"."medico"("idmed", "nome")
  VALUES(19, 'Antonio Roberto Leite Campelo');
INSERT INTO "clinicalmanager"."medico"("idmed", "nome")
  VALUES(22, 'Sandra Santa Cruz de Oliveira');
INSERT INTO "clinicalmanager"."medico"("idmed", "nome")
  VALUES(23, 'Eduardo Henrique de Barros Campelo');
INSERT INTO "clinicalmanager"."medico"("idmed", "nome")
  VALUES(24, 'Leonardo Cordeiro Campelo');
INSERT INTO "clinicalmanager"."medico"("idmed", "nome")
  VALUES(25, 'Emmanuel Cavalcanti Campelo Neto');
INSERT INTO "clinicalmanager"."paciente"("idpac", "nome", "cpf", "codprontuario")
  VALUES(66, 'JOSÉ EVALDO PINTO DE ALBUQUERQUE', NULL, 53770);
INSERT INTO "clinicalmanager"."paciente"("idpac", "nome", "cpf", "codprontuario")
  VALUES(10, 'Alexandre Campelo', '00822571406', 1);
INSERT INTO "clinicalmanager"."paciente"("idpac", "nome", "cpf", "codprontuario")
  VALUES(59, 'José Rodrigues Ferreira da Silva', NULL, 23291);
INSERT INTO "clinicalmanager"."paciente"("idpac", "nome", "cpf", "codprontuario")
  VALUES(62, 'José Rodrigues da Silva', NULL, 134567);
INSERT INTO "clinicalmanager"."paciente"("idpac", "nome", "cpf", "codprontuario")
  VALUES(63, 'Renato Campelo de Barros', '123456781', 5474);
INSERT INTO "clinicalmanager"."paciente"("idpac", "nome", "cpf", "codprontuario")
  VALUES(64, 'José Edvaldo Pinto de Albuquerque', NULL, 53772);
ALTER TABLE "clinicalmanager"."paciente"
	ADD CONSTRAINT "cpf_unique"
	UNIQUE ("cpf");
ALTER TABLE "clinicalmanager"."paciente"
	ADD CONSTRAINT "Codprontuario_unique"
	UNIQUE ("codprontuario");
ALTER TABLE "clinicalmanager"."fatura"
	ADD CONSTRAINT "tipo_fatura"
	CHECK (tipo = ANY (ARRAY['H'::bpchar, 'P'::bpchar]));
ALTER TABLE "clinicalmanager"."internacao"
	ADD CONSTRAINT "faturada_check"
	CHECK (faturada = ANY (ARRAY['P'::bpchar, 'T'::bpchar]));
ALTER TABLE "clinicalmanager"."internacao"
	ADD CONSTRAINT "data_entrada"
	CHECK (data_in IS NOT NULL);
ALTER TABLE "clinicalmanager"."internacao"
	ADD CONSTRAINT "internacao_idpac_fkey"
	FOREIGN KEY("idpac")
	REFERENCES "clinicalmanager"."paciente"("idpac")
	MATCH SIMPLE
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION ;
ALTER TABLE "clinicalmanager"."internacao"
	ADD CONSTRAINT "internacao_idcon_fkey"
	FOREIGN KEY("idcon")
	REFERENCES "clinicalmanager"."convenio"("idcon")
	MATCH SIMPLE
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION ;
ALTER TABLE "clinicalmanager"."internacao"
	ADD CONSTRAINT "idmed_fk"
	FOREIGN KEY("idmed")
	REFERENCES "clinicalmanager"."medico"("idmed")
	MATCH SIMPLE
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION ;
ALTER TABLE "clinicalmanager"."item_de_fatura"
	ADD CONSTRAINT "item_de_fatura_idint_fkey"
	FOREIGN KEY("idint")
	REFERENCES "clinicalmanager"."internacao"("idint")
	MATCH SIMPLE
	ON DELETE CASCADE 
	ON UPDATE NO ACTION ;
ALTER TABLE "clinicalmanager"."item_de_fatura"
	ADD CONSTRAINT "item_de_fatura_idfat_fkey"
	FOREIGN KEY("idfat")
	REFERENCES "clinicalmanager"."fatura"("idfat")
	MATCH SIMPLE
	ON DELETE CASCADE 
	ON UPDATE NO ACTION ;
ALTER TABLE "clinicalmanager"."local_internacao"
	ADD CONSTRAINT "local_internacao_idloc_fkey"
	FOREIGN KEY("idloc")
	REFERENCES "clinicalmanager"."local"("idloc")
	MATCH SIMPLE
	ON DELETE CASCADE 
	ON UPDATE NO ACTION ;
ALTER TABLE "clinicalmanager"."local_internacao"
	ADD CONSTRAINT "local_internacao_idint_fkey"
	FOREIGN KEY("idint")
	REFERENCES "clinicalmanager"."internacao"("idint")
	MATCH SIMPLE
	ON DELETE CASCADE 
	ON UPDATE NO ACTION ;
ALTER TABLE "clinicalmanager"."medico_internacao"
	ADD CONSTRAINT "medico_internacao_idmec_fkey"
	FOREIGN KEY("idmec")
	REFERENCES "clinicalmanager"."medico"("idmed")
	MATCH SIMPLE
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION ;
